<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>飞书编辑器视觉复刻</title>
    <style>
        /* CSS变量定义 */
        :root {
            --text-primary: rgb(31, 35, 41);
            --text-secondary: rgb(100, 106, 115);
            --text-tertiary: rgb(143, 149, 158);
            --text-placeholder: rgb(187, 191, 196);
            --text-white: rgb(255, 255, 255);
            --border-color: rgba(0, 0, 0, 0.06);
            --hover-bg: rgba(0, 0, 0, 0.04);
            --font-family: LarkHackSafariFont, LarkEmojiFont, LarkChineseQuote, -apple-system, "system-ui", "Helvetica Neue", Tahoma, "PingFang SC", "Microsoft Yahei", Arial, "Hiragino Sans GB", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            font-size: 16px;
            color: var(--text-primary);
            background: #fff;
            min-height: 100vh;
        }

        /* 主容器 */
        .page-main-item.editor {
            position: relative;
            min-height: 864px;
            margin-left: 302.5px;
            margin-right: 66px;
            width: calc(100% - 368.5px);
            max-width: 1236.5px;
            padding: 0;
            transform: translate(-54px, 43px);
        }

        /* 编辑器容器 */
        .editor-container {
            position: relative;
        }

        /* 页面块 */
        .block.docx-page-block {
            padding: 0 0 72px;
            position: relative;
        }

        /* 悬浮评论区域 - 已移除评论功能 */
        .layer-popup.suspension-comment-area {
            display: block;
            position: relative;
        }

        /* 占位符容器 */
        #placeholder-wrapper {
            position: relative;
        }

        /* 占位符已移除 */

        /* 页面根块 */
        .page-block.root-block {
            position: relative;
            outline: none;
        }

        /* 区域容器 */
        .zone-container {
            position: relative;
        }

        /* 页面头部 */
        .page-block-header {
            position: relative;
            z-index: 0;
            margin: 0 0 22px;
            padding: 20px 0 0;
        }

        /* 页面头部顶部 */
        .page-block-header-top {
            display: flex;
            height: 28px;
            align-items: center;
            gap: 8px;
        }

        /* 文档元信息入口 */
        .doc-meta-entry-container {
            display: inline-block;
        }

        .doc-meta-entry-wrapper {
            display: flex;
            position: relative;
            z-index: 1;
            height: 28px;
            align-items: center;
        }

        /* 自定义图标入口 */
        .doc-custom-icon-entry {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 28px;
            padding: 0 8px;
            margin-right: 4px;
            border-radius: 6px;
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            opacity: 0;
            transition: all 0.2s ease;
        }

        .page-block-header:hover .doc-custom-icon-entry {
            opacity: 1;
        }

        .doc-custom-icon-entry:hover {
            background: var(--hover-bg);
        }

        .doc-custom-icon-entry svg {
            width: 16px;
            height: 16px;
            margin-right: 4px;
        }

        .doc-custom-icon-entry-text {
            font-size: 14px;
            white-space: nowrap;
        }

        /* 封面入口 */
        .doc-cover-entry {
            display: flex;
            align-items: center;
            height: 28px;
            padding: 0 8px;
            border-radius: 6px;
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            opacity: 0;
            transition: all 0.2s ease;
        }

        .page-block-header:hover .doc-cover-entry {
            opacity: 1;
        }

        .doc-cover-entry:hover {
            background: var(--hover-bg);
        }

        .doc-cover-entry svg {
            width: 16px;
            height: 16px;
            margin-right: 4px;
        }

        /* 标题 */
        .page-block-content {
            display: flex;
            position: relative;
            align-items: baseline;
            min-height: 55.25px;
            font-size: 34px;
            font-weight: 500;
            line-height: 55.25px;
            color: var(--text-primary);
        }

        .zone-container.text-editor {
            position: relative;
            flex: 1 1 0%;
            min-height: 22px;
            outline: none;
        }

        .ace-line {
            display: block;
            position: relative;
        }

        /* 文档信息 */
        .doc-info-swipe-container {
            min-height: 46px;
            margin-top: 0;
        }

        .doc-info-wrapper {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            padding: 12px 0 8px;
            gap: 16px;
        }

        .doc-info-group {
            display: flex;
            align-items: center;
            position: relative;
        }

        .doc-info-group.with-divider::after {
            content: '';
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 1px;
            height: 14px;
            background: rgba(0, 0, 0, 0.08);
        }

        /* 编辑者信息 */
        .docs-info-editor {
            display: flex;
            align-items: center;
            padding: 2px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .docs-info-editor:hover {
            background: var(--hover-bg);
        }

        .docs-info-editor-list {
            display: flex;
            align-items: center;
            height: 22px;
        }

        .docs-info-avatar-container {
            display: flex;
            align-items: center;
        }

        .ud__avatar {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            overflow: hidden;
            background: #5C91FF;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 500;
        }

        .ud__avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .docs-info-avatar-name {
            height: 20px;
            overflow: hidden;
        }

        .docs-info-avatar-name-text {
            padding: 0 4px;
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 20px;
        }

        .docs-info-editor-icon {
            width: 18px;
            height: 20px;
            padding-right: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .docs-info-editor-icon svg {
            width: 14px;
            height: 14px;
            color: var(--text-secondary);
        }

        /* 时间信息 */
        .doc-info-time-item {
            padding: 2px 4px;
            margin-right: 12px;
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 22px;
        }

        /* 页面子内容 */
        .page-block-children {
            position: relative;
        }

        /* 标题块 */
        .block.docx-heading1-block {
            position: relative;
            margin: 0 -2px 10px;
            padding: 0 2px;
            font-size: 26px;
            font-weight: 500;
            line-height: 36.4px;
        }

        .heading-block {
            margin: 0 -2px;
            padding: 0 2px;
        }

        .heading {
            display: flex;
            position: relative;
            align-items: baseline;
        }

        .heading-content {
            flex: 1 1 0px;
            max-width: 100%;
            font-weight: 500;
        }

        /* 折叠按钮 */
        .fold-wrapper {
            position: absolute;
            left: -20px;
            top: 10px;
            z-index: 50;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .heading:hover .fold-wrapper {
            opacity: 1;
        }

        .fold-handler {
            width: 16px;
            height: 16px;
            padding-left: 2px;
            border-radius: 2px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .fold-handler:hover {
            background: var(--hover-bg);
        }

        .svg-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        .fold-handler svg {
            width: 16px;
            height: 16px;
            transition: transform 0.2s ease-out;
        }

        /* 编辑时的动画效果 */
        .flash-block-content {
            animation: flash-highlight 0.3s ease-in-out;
        }

        @keyframes flash-highlight {
            0% { background: transparent; }
            50% { background: rgba(251, 191, 36, 0.1); }
            100% { background: transparent; }
        }

        /* 选中效果 */
        ::selection {
            background: rgba(35, 131, 226, 0.2);
        }

        /* 焦点样式 */
        [contenteditable]:focus {
            outline: none;
        }

        /* 鼠标样式 */
        [contenteditable] {
            cursor: text;
        }
    </style>
</head>
<body>
    <div class="page-main-item editor">
        <div class="doc-cover-toolbar"></div>
        <div class="editor-container selecting-inline">
            <div data-block-type="page" data-block-id="1" class="block docx-page-block">
                <div>
                    <div>
                        <!-- 编辑器主体 -->
                        <div id="placeholder-wrapper">

                            <div class="page-block root-block" contenteditable="true" spellcheck="false">
                                <div class="zone-container editor-kit-container">
                                    <!-- 页面头部 -->
                                    <div class="page-block-header page-block-header__custom_icon">
                                        <div class="page-block-header-top" contenteditable="false">
                                            <!-- 添加图标入口 -->
                                            <div class="doc-meta-entry-container">
                                                <div class="doc-meta-entry-wrapper">
                                                    <div class="doc-custom-icon-entry doc-meta-entry">
                                                        <svg viewBox="0 0 24 24" fill="none">
                                                            <path d="M20.376 13h2.023c.066-.49.101-.991.101-1.5 0-6.075-4.925-11-11-11s-11 4.925-11 11 4.925 11 11 11c.509 0 1.01-.035 1.5-.101v-2.023A9 9 0 1 1 20.376 13Z" fill="currentColor"/>
                                                            <path d="M14.5 8a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V9a1 1 0 0 0-1-1Zm-6 0a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V9a1 1 0 0 0-1-1Zm7.574 5.5h-1.459a.5.5 0 0 0-.389.185c-.114.142-.21.25-.285.323A3.489 3.489 0 0 1 11.5 15a3.488 3.488 0 0 1-2.428-.98 3.876 3.876 0 0 1-.298-.335.5.5 0 0 0-.389-.185H6.92a.354.354 0 0 0-.313.514A5.5 5.5 0 0 0 11.5 17a5.5 5.5 0 0 0 4.892-2.984.355.355 0 0 0-.318-.516ZM19 23a1 1 0 0 1-1-1v-2h-2a1 1 0 1 1 0-2h2v-2a1 1 0 1 1 2 0v2h2a1 1 0 1 1 0 2h-2v2a1 1 0 0 1-1 1Z" fill="currentColor"/>
                                                        </svg>
                                                        <span class="doc-custom-icon-entry-text">添加图标</span>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 添加封面入口 -->
                                            <div class="doc-meta-entry-container">
                                                <div class="doc-meta-entry-wrapper">
                                                    <div class="doc-cover-entry doc-meta-entry">
                                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                                            <path d="M6.76 11.993l-2.85-.007a.2.2 0 01-.142-.341l2.755-2.756a.267.267 0 01.378 0l1.27 1.272 3.373-3.372a.267.267 0 01.455.189V11.8a.2.2 0 01-.2.2H6.815a.203.203 0 01-.056-.008zm-4.095 2.674c-.733 0-1.333-.6-1.333-1.333V2.667c0-.733.6-1.333 1.333-1.333h10.667c.733 0 1.333.6 1.333 1.333v10.667c0 .733-.6 1.333-1.333 1.333H2.665zm0-1.333h10.667V2.667H2.665v10.667zM4 4.001h2v2h-2V4z" fill="#646A73"/>
                                                        </svg>
                                                        <span class="doc-custom-icon-entry-text">添加封面</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- 页面标题 -->
                                        <h1 class="page-block-content left flash-block-content">
                                            <div class="zone-container text-editor non-empty" contenteditable="true">
                                                <div class="ace-line" dir="auto">
                                                    <span class="author-content">读书笔记</span>
                                                </div>
                                            </div>
                                        </h1>

                                        <!-- 文档信息 -->
                                        <div contenteditable="false">
                                            <div class="doc-info-swipe-container">
                                                <div class="doc-info-wrapper">
                                                    <!-- 编辑者信息 -->
                                                    <div class="doc-info-group doc-info-group-person with-divider">
                                                        <div class="doc-info-editor-wrapper">
                                                            <div class="editor-info-overlay-target doc-info-editor-pc">
                                                                <div class="docs-info-editor docs-info-editable">
                                                                    <div class="docs-info-editor-list">
                                                                        <div class="docs-info-avatar-container">
                                                                            <span class="ud__avatar">C</span>
                                                                            <span class="docs-info-avatar-name">
                                                                                <span class="docs-info-avatar-name-text">用户</span>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="docs-info-editor-icon">
                                                                        <svg viewBox="0 0 24 24" fill="none">
                                                                            <path d="m17.57 7.244-.006-.006.37-.37a1 1 0 0 0 .001-1.412l-3.434-3.453-.002-.002a1 1 0 0 0-1.414 0l-.705.706.01.01L2 13.186V17a1 1 0 0 0 1 1h3.814L17.57 7.244Zm-3.273.389-2.015-2.015 1.487-1.515 2.023 2.034-1.495 1.496Zm-3.415-.587 2.002 2.002-6.913 6.92h-.004l-1.934-1.935v-.003l6.849-6.984ZM3 20a1 1 0 1 0 0 2h18a1 1 0 1 0 0-2H3Z" fill="currentColor"/>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- 时间信息 -->
                                                    <div class="doc-info-group doc-info-group-time">
                                                        <div class="doc-info-time-item">今天修改</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 页面子内容 -->
                                    <div class="page-block-children">
                                        <div class="root-render-unit-container">
                                            <div class="render-unit-wrapper">
                                                <!-- 标题块 -->
                                                <div class="block docx-heading1-block" data-block-type="heading1" data-block-id="2">
                                                    <div class="heading-block">
                                                        <div class="heading heading-h1">
                                                            <div class="heading-content">
                                                                <div class="zone-container text-editor non-empty" contenteditable="true">
                                                                    <div class="ace-line" dir="auto">
                                                                        <span class="author-content">Hi</span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- 折叠按钮 -->
                                                            <div class="fold-wrapper can-fold">
                                                                <div class="fold-handler">
                                                                    <div class="svg-wrapper">
                                                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                                                            <path d="M7.712 11.351L3.34 5.9a.45.45 0 010-.538.278.278 0 01.215-.112h8.89c.168 0 .305.17.305.381a.432.432 0 01-.09.269l-4.372 5.451c-.159.199-.417.199-.576 0z" fill="#2B2F36"/>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- 更多内容区域 -->
                                                <div class="block docx-text-block" style="margin: 0 -2px; padding: 2px;">
                                                    <div class="zone-container text-editor" contenteditable="true">
                                                        <div class="ace-line" dir="auto">
                                                            <span class="author-content">这是一个飞书编辑器的视觉复刻版本</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 编辑器初始化
        const editor = document.querySelector('.page-block.root-block');

        // 折叠功能
        document.querySelectorAll('.fold-handler').forEach(handler => {
            handler.addEventListener('click', function() {
                const svg = this.querySelector('svg');
                const isCollapsed = svg.style.transform === 'rotate(-90deg)';
                svg.style.transform = isCollapsed ? '' : 'rotate(-90deg)';
                // 这里可以添加实际的折叠逻辑
            });
        });

        // 编辑时的高亮效果
        document.querySelectorAll('[contenteditable]').forEach(editable => {
            editable.addEventListener('focus', function() {
                this.closest('.heading-content, .page-block-content')?.classList.add('flash-block-content');
            });

            editable.addEventListener('blur', function() {
                setTimeout(() => {
                    this.closest('.heading-content, .page-block-content')?.classList.remove('flash-block-content');
                }, 300);
            });
        });
    </script>
</body>
</html>