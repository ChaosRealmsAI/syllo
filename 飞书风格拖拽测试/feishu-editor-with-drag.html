<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>飞书编辑器 - 带拖拽句柄</title>
    <style>
        /* ========== CSS变量系统 ========== */
        :root {
            /* 颜色系统 */
            --feishu-text-primary: rgb(31, 35, 41);
            --feishu-text-secondary: rgb(100, 106, 115);
            --feishu-text-tertiary: rgb(143, 149, 158);
            --feishu-text-placeholder: rgb(187, 191, 196);
            --feishu-text-white: rgb(255, 255, 255);

            /* 背景色 */
            --feishu-bg-hover: rgba(0, 0, 0, 0.04);
            --feishu-bg-active: rgba(0, 0, 0, 0.08);
            --feishu-bg-selection: rgba(35, 131, 226, 0.2);
            --feishu-bg-highlight: rgba(251, 191, 36, 0.1);
            --feishu-bg-surface: rgb(255, 255, 255);

            /* 边框 */
            --feishu-border-light: rgba(0, 0, 0, 0.06);
            --feishu-border-divider: rgba(0, 0, 0, 0.08);
            --feishu-border-default: rgb(222, 224, 227);

            /* 主题色 */
            --feishu-color-accent: rgb(51, 109, 244);

            /* 间距系统 */
            --feishu-spacing-xs: 4px;
            --feishu-spacing-sm: 8px;
            --feishu-spacing-md: 12px;
            --feishu-spacing-lg: 16px;
            --feishu-spacing-xl: 20px;
            --feishu-spacing-2xl: 24px;

            /* 圆角 */
            --feishu-radius-sm: 2px;
            --feishu-radius-md: 4px;
            --feishu-radius-lg: 6px;

            /* 字体 */
            --feishu-font-family: LarkHackSafariFont, LarkEmojiFont, LarkChineseQuote,
                                  -apple-system, "system-ui", "Helvetica Neue", Tahoma,
                                  "PingFang SC", "Microsoft Yahei", Arial, sans-serif;

            /* 动画 */
            --feishu-transition-fast: 0.15s ease;
            --feishu-transition-normal: 0.2s ease;
            --feishu-transition-slow: 0.3s ease-in-out;
        }

        /* ========== 基础重置 ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--feishu-font-family);
            font-size: 16px;
            color: var(--feishu-text-primary);
            background: #fff;
            min-height: 100vh;
            line-height: 1.5;
        }

        /* ========== 编辑器容器 ========== */
        .feishu-editor-wrapper {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 60px;
        }

        /* ========== 编辑器头部工具栏 ========== */
        .feishu-editor-toolbar {
            display: flex;
            gap: var(--feishu-spacing-sm);
            margin-bottom: var(--feishu-spacing-2xl);
            opacity: 0;
            transition: opacity var(--feishu-transition-normal);
        }

        .feishu-editor-wrapper:hover .feishu-editor-toolbar {
            opacity: 1;
        }

        .feishu-toolbar-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--feishu-spacing-xs);
            padding: var(--feishu-spacing-xs) var(--feishu-spacing-sm);
            border: none;
            background: transparent;
            border-radius: var(--feishu-radius-lg);
            color: var(--feishu-text-secondary);
            font-size: 14px;
            cursor: pointer;
            transition: all var(--feishu-transition-fast);
        }

        .feishu-toolbar-btn:hover {
            background: var(--feishu-bg-hover);
        }

        .feishu-toolbar-btn:active {
            background: var(--feishu-bg-active);
        }

        .feishu-toolbar-btn svg {
            width: 16px;
            height: 16px;
        }

        /* ========== 文档标题 ========== */
        .feishu-doc-title {
            font-size: 34px;
            font-weight: 500;
            line-height: 1.4;
            color: var(--feishu-text-primary);
            margin-bottom: var(--feishu-spacing-lg);
            padding: var(--feishu-spacing-xs) 0;
            border: none;
            outline: none;
            transition: background var(--feishu-transition-slow);
        }

        /* ========== 文档元信息 ========== */
        .feishu-doc-meta {
            display: flex;
            align-items: center;
            gap: var(--feishu-spacing-lg);
            padding: var(--feishu-spacing-md) 0;
            margin-bottom: var(--feishu-spacing-2xl);
            border-bottom: 1px solid var(--feishu-border-light);
        }

        .feishu-meta-group {
            display: flex;
            align-items: center;
            position: relative;
        }

        .feishu-meta-author {
            display: flex;
            align-items: center;
            gap: var(--feishu-spacing-xs);
            padding: 2px var(--feishu-spacing-xs);
            border-radius: var(--feishu-radius-lg);
            cursor: pointer;
            transition: background var(--feishu-transition-fast);
        }

        .feishu-avatar {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #5C91FF;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 500;
        }

        .feishu-meta-text {
            color: var(--feishu-text-secondary);
            font-size: 14px;
        }

        /* ========== 内容区块 - 增加拖拽句柄支持 ========== */
        .feishu-content-block {
            margin-bottom: var(--feishu-spacing-lg);
            position: relative;
            padding-left: 0;
            transition: padding-left var(--feishu-transition-fast);
        }

        /* 悬停时显示拖拽句柄 */
        .feishu-content-block:hover {
            padding-left: 52px;
        }

        /* ========== 拖拽句柄样式 ========== */
        .drag-handle-container {
            position: absolute;
            left: 0;
            top: 0;
            width: 42px;
            height: 26px;
            opacity: 0;
            transition: all var(--feishu-transition-normal);
            pointer-events: none;
        }

        .feishu-content-block:hover .drag-handle-container {
            opacity: 1;
            pointer-events: auto;
        }

        .drag-handle-trigger {
            display: block;
            width: 42px;
            height: 26px;
            background: transparent;
            cursor: grab;
        }

        .drag-handle-wrapper {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            width: 42px;
            height: 26px;
            padding: 1px;
            border: 1px solid var(--feishu-border-default);
            border-radius: 6px;
            background: var(--feishu-bg-surface);
            transition: all 0.2s ease;
            cursor: grab;
        }

        .drag-handle-wrapper:hover {
            border-color: var(--feishu-color-accent);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .drag-handle-trigger:active .drag-handle-wrapper {
            cursor: grabbing;
            transform: scale(0.95);
        }

        .drag-handle-icon-container {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            width: 24px;
            height: 24px;
            background: transparent;
        }

        .drag-icon {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            width: 22px;
            height: 22px;
        }

        .drag-icon svg {
            display: block;
            width: 14px;
            height: 14px;
            color: var(--feishu-text-primary);
        }

        .drag-handle-icon {
            display: block;
            width: 14px;
            height: 14px;
        }

        .drag-handle-icon svg {
            display: inline-block;
            width: 14px;
            height: 14px;
            color: var(--feishu-text-secondary);
        }

        /* 拖拽中的样式 */
        .feishu-content-block.dragging {
            opacity: 0.5;
            background: var(--feishu-bg-hover);
            border-radius: var(--feishu-radius-lg);
        }

        .feishu-content-block.drag-over {
            border-top: 2px solid var(--feishu-color-accent);
        }

        /* ========== 标题样式 ========== */
        .feishu-heading {
            position: relative;
            padding-left: 0;
        }

        .feishu-heading-h1 {
            font-size: 26px;
            font-weight: 500;
            line-height: 1.4;
            margin: var(--feishu-spacing-xl) 0 var(--feishu-spacing-md);
        }

        .feishu-heading-h2 {
            font-size: 22px;
            font-weight: 500;
            line-height: 1.4;
            margin: var(--feishu-spacing-lg) 0 var(--feishu-spacing-sm);
        }

        .feishu-heading-h3 {
            font-size: 18px;
            font-weight: 500;
            line-height: 1.4;
            margin: var(--feishu-spacing-md) 0 var(--feishu-spacing-sm);
        }

        /* ========== 段落 ========== */
        .feishu-paragraph {
            font-size: 16px;
            line-height: 1.75;
            margin-bottom: var(--feishu-spacing-md);
            color: var(--feishu-text-primary);
        }

        /* ========== 列表 ========== */
        .feishu-list {
            margin: var(--feishu-spacing-md) 0;
            padding-left: var(--feishu-spacing-2xl);
        }

        .feishu-list-item {
            line-height: 1.75;
            margin-bottom: var(--feishu-spacing-xs);
        }

        /* ========== 代码块 ========== */
        .feishu-code-block {
            background: #f5f6f7;
            border-radius: var(--feishu-radius-lg);
            padding: var(--feishu-spacing-lg);
            margin: var(--feishu-spacing-lg) 0;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 14px;
            line-height: 1.5;
            overflow-x: auto;
        }

        /* ========== 引用块 ========== */
        .feishu-quote {
            border-left: 3px solid var(--feishu-border-divider);
            padding-left: var(--feishu-spacing-lg);
            margin: var(--feishu-spacing-lg) 0;
            color: var(--feishu-text-secondary);
            font-style: italic;
        }

        /* ========== 分割线 ========== */
        .feishu-divider {
            height: 1px;
            background: var(--feishu-border-light);
            margin: var(--feishu-spacing-2xl) 0;
            border: none;
        }

        /* ========== 选中效果 ========== */
        ::selection {
            background: var(--feishu-bg-selection);
        }

        /* 拖拽指示器 */
        .drop-indicator {
            position: absolute;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--feishu-color-accent);
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
        }

        .drop-indicator.active {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="feishu-editor-wrapper">
        <!-- 工具栏 -->
        <div class="feishu-editor-toolbar">
            <button class="feishu-toolbar-btn">
                <svg viewBox="0 0 24 24" fill="none">
                    <path d="M20.376 13h2.023c.066-.49.101-.991.101-1.5 0-6.075-4.925-11-11-11s-11 4.925-11 11 4.925 11 11 11c.509 0 1.01-.035 1.5-.101v-2.023A9 9 0 1 1 20.376 13Z" fill="currentColor"/>
                    <path d="M14.5 8a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V9a1 1 0 0 0-1-1Zm-6 0a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V9a1 1 0 0 0-1-1Z" fill="currentColor"/>
                </svg>
                <span>添加图标</span>
            </button>
            <button class="feishu-toolbar-btn">
                <svg viewBox="0 0 16 16" fill="none">
                    <path d="M6.76 11.993l-2.85-.007a.2.2 0 01-.142-.341l2.755-2.756a.267.267 0 01.378 0l1.27 1.272 3.373-3.372a.267.267 0 01.455.189V11.8a.2.2 0 01-.2.2H6.815a.203.203 0 01-.056-.008zm-4.095 2.674c-.733 0-1.333-.6-1.333-1.333V2.667c0-.733.6-1.333 1.333-1.333h10.667c.733 0 1.333.6 1.333 1.333v10.667c0 .733-.6 1.333-1.333 1.333H2.665z" fill="currentColor"/>
                </svg>
                <span>添加封面</span>
            </button>
        </div>

        <!-- 文档标题 -->
        <h1 class="feishu-doc-title">飞书编辑器 - 带拖拽句柄</h1>

        <!-- 文档元信息 -->
        <div class="feishu-doc-meta">
            <div class="feishu-meta-group">
                <div class="feishu-meta-author">
                    <div class="feishu-avatar">U</div>
                    <span class="feishu-meta-text">用户</span>
                </div>
            </div>
            <div class="feishu-meta-group">
                <span class="feishu-meta-text">今天修改</span>
            </div>
        </div>

        <!-- 内容区域 -->
        <div class="editor-content">
            <!-- 示例内容块 1 - 一级标题 -->
            <div class="feishu-content-block" draggable="false" data-block-id="block-1">
                <!-- 拖拽句柄 -->
                <div class="drag-handle-container">
                    <div class="drag-handle-trigger">
                        <div class="drag-handle-wrapper">
                            <div class="drag-handle-icon-container">
                                <span class="drag-icon">
                                    <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                        <path d="M2 3a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V4h-7v16h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h3V4H4v3a1 1 0 1 1-2 0V3Z" fill="currentColor"></path>
                                    </svg>
                                </span>
                            </div>
                            <span class="drag-handle-icon">
                                <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                    <path d="M8.25 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 7.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm1.75 5.5a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM14.753 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM16.5 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Zm-1.747 9a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" fill="currentColor"></path>
                                </svg>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="feishu-heading feishu-heading-h1">
                    一级标题示例
                </div>
            </div>

            <!-- 示例内容块 2 - 段落 -->
            <div class="feishu-content-block" draggable="false" data-block-id="block-2">
                <!-- 拖拽句柄 -->
                <div class="drag-handle-container">
                    <div class="drag-handle-trigger">
                        <div class="drag-handle-wrapper">
                            <div class="drag-handle-icon-container">
                                <span class="drag-icon">
                                    <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                        <path d="M2 3a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V4h-7v16h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h3V4H4v3a1 1 0 1 1-2 0V3Z" fill="currentColor"></path>
                                    </svg>
                                </span>
                            </div>
                            <span class="drag-handle-icon">
                                <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                    <path d="M8.25 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 7.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm1.75 5.5a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM14.753 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM16.5 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Zm-1.747 9a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" fill="currentColor"></path>
                                </svg>
                            </span>
                        </div>
                    </div>
                </div>
                <p class="feishu-paragraph">
                    这是一个带有拖拽句柄的段落。当鼠标悬停在段落上时，左侧会出现拖拽句柄，你可以通过拖拽句柄来重新排列内容块的顺序。
                </p>
            </div>

            <!-- 示例内容块 3 - 二级标题 -->
            <div class="feishu-content-block" draggable="false" data-block-id="block-3">
                <!-- 拖拽句柄 -->
                <div class="drag-handle-container">
                    <div class="drag-handle-trigger">
                        <div class="drag-handle-wrapper">
                            <div class="drag-handle-icon-container">
                                <span class="drag-icon">
                                    <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                        <path d="M2 3a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V4h-7v16h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h3V4H4v3a1 1 0 1 1-2 0V3Z" fill="currentColor"></path>
                                    </svg>
                                </span>
                            </div>
                            <span class="drag-handle-icon">
                                <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                    <path d="M8.25 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 7.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm1.75 5.5a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM14.753 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM16.5 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Zm-1.747 9a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" fill="currentColor"></path>
                                </svg>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="feishu-heading feishu-heading-h2">
                    二级标题示例
                </div>
            </div>

            <!-- 示例内容块 4 - 列表 -->
            <div class="feishu-content-block" draggable="false" data-block-id="block-4">
                <!-- 拖拽句柄 -->
                <div class="drag-handle-container">
                    <div class="drag-handle-trigger">
                        <div class="drag-handle-wrapper">
                            <div class="drag-handle-icon-container">
                                <span class="drag-icon">
                                    <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                        <path d="M2 3a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V4h-7v16h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h3V4H4v3a1 1 0 1 1-2 0V3Z" fill="currentColor"></path>
                                    </svg>
                                </span>
                            </div>
                            <span class="drag-handle-icon">
                                <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                    <path d="M8.25 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 7.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm1.75 5.5a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM14.753 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM16.5 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Zm-1.747 9a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" fill="currentColor"></path>
                                </svg>
                            </span>
                        </div>
                    </div>
                </div>
                <ul class="feishu-list">
                    <li class="feishu-list-item">拖拽句柄集成成功</li>
                    <li class="feishu-list-item">鼠标悬停显示句柄</li>
                    <li class="feishu-list-item">支持拖拽重排序</li>
                </ul>
            </div>

            <!-- 示例内容块 5 - 代码块 -->
            <div class="feishu-content-block" draggable="false" data-block-id="block-5">
                <!-- 拖拽句柄 -->
                <div class="drag-handle-container">
                    <div class="drag-handle-trigger">
                        <div class="drag-handle-wrapper">
                            <div class="drag-handle-icon-container">
                                <span class="drag-icon">
                                    <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                        <path d="M2 3a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V4h-7v16h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h3V4H4v3a1 1 0 1 1-2 0V3Z" fill="currentColor"></path>
                                    </svg>
                                </span>
                            </div>
                            <span class="drag-handle-icon">
                                <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                    <path d="M8.25 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 7.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm1.75 5.5a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM14.753 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM16.5 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Zm-1.747 9a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" fill="currentColor"></path>
                                </svg>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="feishu-code-block">// 拖拽功能实现
function initDragAndDrop() {
  const blocks = document.querySelectorAll('.feishu-content-block');
  blocks.forEach(block => {
    const handle = block.querySelector('.drag-handle-trigger');
    if (handle) {
      handle.addEventListener('mousedown', startDrag);
    }
  });
}</div>
            </div>

            <!-- 示例内容块 6 - 引用 -->
            <div class="feishu-content-block" draggable="false" data-block-id="block-6">
                <!-- 拖拽句柄 -->
                <div class="drag-handle-container">
                    <div class="drag-handle-trigger">
                        <div class="drag-handle-wrapper">
                            <div class="drag-handle-icon-container">
                                <span class="drag-icon">
                                    <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                        <path d="M2 3a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V4h-7v16h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h3V4H4v3a1 1 0 1 1-2 0V3Z" fill="currentColor"></path>
                                    </svg>
                                </span>
                            </div>
                            <span class="drag-handle-icon">
                                <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                    <path d="M8.25 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 7.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm1.75 5.5a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM14.753 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM16.5 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Zm-1.747 9a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" fill="currentColor"></path>
                                </svg>
                            </span>
                        </div>
                    </div>
                </div>
                <blockquote class="feishu-quote">
                    这个融合版本完美结合了飞书编辑器的样式和拖拽句柄功能，提供了流畅的交互体验。
                </blockquote>
            </div>

            <hr class="feishu-divider">

            <!-- 示例内容块 7 - 三级标题 -->
            <div class="feishu-content-block" draggable="false" data-block-id="block-7">
                <!-- 拖拽句柄 -->
                <div class="drag-handle-container">
                    <div class="drag-handle-trigger">
                        <div class="drag-handle-wrapper">
                            <div class="drag-handle-icon-container">
                                <span class="drag-icon">
                                    <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                        <path d="M2 3a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V4h-7v16h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h3V4H4v3a1 1 0 1 1-2 0V3Z" fill="currentColor"></path>
                                    </svg>
                                </span>
                            </div>
                            <span class="drag-handle-icon">
                                <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                    <path d="M8.25 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 7.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm1.75 5.5a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM14.753 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM16.5 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Zm-1.747 9a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" fill="currentColor"></path>
                                </svg>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="feishu-heading feishu-heading-h3">
                    三级标题示例
                </div>
            </div>

            <!-- 示例内容块 8 - 段落 -->
            <div class="feishu-content-block" draggable="false" data-block-id="block-8">
                <!-- 拖拽句柄 -->
                <div class="drag-handle-container">
                    <div class="drag-handle-trigger">
                        <div class="drag-handle-wrapper">
                            <div class="drag-handle-icon-container">
                                <span class="drag-icon">
                                    <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                        <path d="M2 3a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V4h-7v16h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h3V4H4v3a1 1 0 1 1-2 0V3Z" fill="currentColor"></path>
                                    </svg>
                                </span>
                            </div>
                            <span class="drag-handle-icon">
                                <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                    <path d="M8.25 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 7.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm1.75 5.5a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM14.753 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM16.5 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Zm-1.747 9a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" fill="currentColor"></path>
                                </svg>
                            </span>
                        </div>
                    </div>
                </div>
                <p class="feishu-paragraph">
                    每个内容块都支持独立拖拽，拖拽句柄的设计完全复刻了飞书的样式，包括悬浮效果、边框样式和图标设计。
                </p>
            </div>
        </div>
    </div>

    <script>
        // 拖拽功能实现
        let draggedElement = null;
        let dropIndicator = null;

        // 创建拖拽指示器
        function createDropIndicator() {
            const indicator = document.createElement('div');
            indicator.className = 'drop-indicator';
            return indicator;
        }

        // 初始化拖拽功能
        function initDragAndDrop() {
            // 创建拖拽指示器
            dropIndicator = createDropIndicator();

            const blocks = document.querySelectorAll('.feishu-content-block');

            blocks.forEach(block => {
                const handle = block.querySelector('.drag-handle-trigger');
                if (handle) {
                    // 拖拽句柄事件
                    handle.addEventListener('mousedown', function(e) {
                        e.preventDefault();
                        startDrag(e, block);
                    });
                }

                // 设置拖拽事件
                block.addEventListener('dragover', handleDragOver);
                block.addEventListener('drop', handleDrop);
                block.addEventListener('dragenter', handleDragEnter);
                block.addEventListener('dragleave', handleDragLeave);
            });
        }

        // 开始拖拽
        function startDrag(e, block) {
            // 设置可拖拽
            block.setAttribute('draggable', 'true');

            // 拖拽开始事件
            block.addEventListener('dragstart', function(e) {
                draggedElement = block;
                block.classList.add('dragging');
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/html', block.innerHTML);
            });

            // 拖拽结束事件
            block.addEventListener('dragend', function(e) {
                block.classList.remove('dragging');
                block.setAttribute('draggable', 'false');

                // 移除所有拖拽相关样式
                document.querySelectorAll('.feishu-content-block').forEach(b => {
                    b.classList.remove('drag-over');
                });

                // 移除指示器
                if (dropIndicator.parentNode) {
                    dropIndicator.parentNode.removeChild(dropIndicator);
                }

                draggedElement = null;
            });

            // 触发拖拽
            setTimeout(() => {
                const dragEvent = new DragEvent('dragstart', {
                    bubbles: true,
                    cancelable: true,
                    dataTransfer: new DataTransfer()
                });
                block.dispatchEvent(dragEvent);
            }, 0);
        }

        // 处理拖拽经过
        function handleDragOver(e) {
            if (!draggedElement) return;
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';

            const block = e.currentTarget;
            if (block === draggedElement) return;

            const rect = block.getBoundingClientRect();
            const midpoint = rect.top + rect.height / 2;

            // 根据鼠标位置决定插入位置
            if (e.clientY < midpoint) {
                // 在上方插入
                if (dropIndicator.parentNode !== block.parentNode ||
                    dropIndicator.nextSibling !== block) {
                    block.parentNode.insertBefore(dropIndicator, block);
                }
            } else {
                // 在下方插入
                if (dropIndicator.parentNode !== block.parentNode ||
                    dropIndicator.previousSibling !== block) {
                    block.parentNode.insertBefore(dropIndicator, block.nextSibling);
                }
            }

            dropIndicator.classList.add('active');
        }

        // 处理拖拽进入
        function handleDragEnter(e) {
            if (!draggedElement) return;
            e.preventDefault();
        }

        // 处理拖拽离开
        function handleDragLeave(e) {
            if (!draggedElement) return;
            // 检查是否真的离开了元素
            if (e.target === e.currentTarget) {
                e.currentTarget.classList.remove('drag-over');
            }
        }

        // 处理放置
        function handleDrop(e) {
            if (!draggedElement) return;
            e.preventDefault();
            e.stopPropagation();

            // 移动元素到指示器位置
            if (dropIndicator.parentNode) {
                dropIndicator.parentNode.insertBefore(draggedElement, dropIndicator);
                dropIndicator.classList.remove('active');
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            initDragAndDrop();
            console.log('飞书编辑器拖拽功能已初始化');
        });

        // 阻止默认的文本选择
        document.addEventListener('selectstart', function(e) {
            if (draggedElement) {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>